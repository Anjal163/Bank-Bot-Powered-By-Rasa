version: "3.1"

stories:
- story: User opens a new account
  steps:
  - intent: open_account
  - action: open_account_form
  - active_loop: open_account_form
  - slot_was_set:
      - name: "Anjal Nigam"
      - phone: "9000000001"
      - email: "anjal@bank.com"
      - account_type: "Savings"
      - balance: "5000"
  - active_loop: null
  - action: action_submit_account

- story: minimum balance flow
  steps:
    - intent: minimum_balance
    - action: minimum_balance_form
    - active_loop: minimum_balance_form
    - intent: provide_account_type
    - action: minimum_balance_form
    - active_loop: null
    - action: action_minimum_balance

- story: Check balance flow
  steps:
    - intent: check_balance
    - action: utter_ask_email
    - intent: provide_email
      entities:
        - email: "rahul.mehta@gmail.com"
    - action: action_send_otp_email
    - action: utter_ask_otp
    - intent: provide_otp
      entities:
        - otp: "563290"
    - action: action_validate_otp
    - action: action_verify_balance

- story: Update personal details
  steps:
    - intent: update_personal_details
    - action: utter_update_personal_details

- story: Account number lost
  steps:
    - intent: account_number_lost
    - action: utter_account_number_lost

- story: display mini statement using phone number
  steps:
    - intent: request_mini_statement
    - action: utter_ask_phone
    - intent: provide_phone
      entities:
        - phone: "9455094680"
    - action: action_mini_statement    
